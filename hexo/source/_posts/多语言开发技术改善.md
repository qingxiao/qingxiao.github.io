title: 多语言开发技术改善
date: 2015-04-20 22:47:22
tags:
- 多语言
- gulp插件
---
前端开发中，会在html， js中使用一些默认语言的字符串，当项目需要多语言国际化：
1 开发前明确需要多语言，把需要多语言的地方写上方法调用，然后把对应的key和value添加到语言配置文件
2 开发完成后再提出需要多语言，手动查找需要多语言的字符串，替换成key，并提取出key和value添加到语言配置文件
3 当html开发完成，嵌入到后端view层的时候，需要后端人员去处理后端的多语言

遇到问题：
1 需要人工手动检查重复字段；
2 前后端分别处理而不能使用同一份配置文件；
3 遇到上述方法2的时候，会消耗大量时间去完成功能；


解决方案：
<!-- more -->
1、无论是js或者html还是后端view层，统一使用标示符 __i18n__("name{0}",["param1"])
     参数1：string 默认显示的文本，作为默认语言
     参数2：array 文本中需要替换的对应的字段
2、使用前端自动化工具gulp来解析标识符，提取出第一个参数name生成默认的语言包：
     string.properties：
          name1=name1
          name2=name2
          ...
     把该文件作为基础包，翻译出其他对应的语言包；
3、java后端有多语言jar包处理properties文件并传给模板使用，模板中把 __i18n__(...)调用后端模板方法处理多语言；
      前端使用ajax请求语言包，或者直接script标签引入语言包js，并解析成json格式供前端方法 __i18n__(...)直接调用；
4、如果key需要用英文加下划线，将提取出来的key通过调用百度翻译api转换成为英文，并将文件中对应的地方替换成为新的key

使用插件：
###gulp-tcl-i18n


